services:
  app:
    build: .
    ports:
      - "4000:4000"
    env_file:
      - .env
    environment:
      # Run mix phx.gen.secret
      SECRET_KEY_BASE: 1DdaMAX56nUh1tvXniEEuQNsGNvgADndawxrJ3YFZlLXc9EOahC/NFDgowCDUFwb
      PHX_HOST: localhost
      # Disable this in prod
      MAILBOX_PREVIEW_ENABLED: true
      # Godot (used by modules/plugins/godot_hook)
      GODOT_BIN: /opt/godot/godot
      GODOT_PROJECT_PATH: /app/godot
      # Optional: override startup mode (default is export_and_run)
      # GODOT_START_MODE: run
      # Use dev for localhost
      MIX_ENV: dev
    volumes:
      - ./godot:/app/godot
      - ./modules:/app/modules
      - ./priv/static/images:/app/priv/static/images
      - ./priv/static/assets/css/theme:/app/priv/static/assets/css/theme
      - ./db:/app/db
